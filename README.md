# Mesedclinic — Сайт медицинской клиники

Full-stack приложение на Next.js для сети медицинских клиник Mesedclinic.

## Технологический стек

- **Frontend/Backend**: Next.js 14 (App Router) + React + TypeScript
- **UI**: TailwindCSS + shadcn/ui
- **База данных**: PostgreSQL + Prisma ORM
- **Аутентификация**: NextAuth.js
- **Валидация**: Zod

## Структура проекта

```
/
├── app/
│   ├── (public)/          # Публичные страницы
│   │   ├── napravleniya/  # Направления
│   │   ├── uslugi/        # Услуги
│   │   ├── chto-my-lechim/# Что мы лечим
│   │   ├── kliniki/       # Филиалы
│   │   ├── vrachi/        # Врачи
│   │   ├── akcii/         # Акции
│   │   ├── stati/         # Статьи/блог
│   │   ├── online/        # Онлайн-консультации
│   │   └── zapis/         # Запись на приём
│   ├── (admin)/           # Админ-панель (защищённая)
│   │   └── admin/
│   │       ├── dashboard/ # Главная панели
│   │       ├── services/  # Управление услугами
│   │       ├── directions/# Управление направлениями
│   │       ├── symptoms/  # Управление "что лечим"
│   │       ├── clinics/   # Управление клиниками
│   │       ├── doctors/   # Управление врачами
│   │       ├── promotions/# Управление акциями
│   │       ├── articles/  # Управление статьями
│   │       └── leads/     # Заявки
│   ├── (auth)/            # Страницы аутентификации
│   │   └── login/         # Страница входа
│   └── api/               # API роуты
│       ├── auth/          # NextAuth роуты
│       ├── record/        # Запись на приём
│       └── feedback/      # Обратная связь
├── components/
│   ├── admin/             # Компоненты админ-панели
│   └── ui/                # UI компоненты (shadcn/ui)
├── lib/
│   ├── db.ts              # Prisma клиент
│   ├── auth.ts            # Настройки NextAuth
│   ├── seo.ts             # Утилиты для SEO
│   ├── utils.ts           # Общие утилиты
│   └── validations.ts     # Zod схемы
└── prisma/
    ├── schema.prisma      # Prisma схема БД
    └── seed.ts            # Сидер для начальных данных
```

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка базы данных

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

Заполните `DATABASE_URL` в `.env`:

```
DATABASE_URL="postgresql://user:password@localhost:5432/mesedclinic?schema=public"
```

### 3. Инициализация базы данных

```bash
# Генерация Prisma Client
npm run db:generate

# Применение схемы к БД (для разработки)
npm run db:push

# Или создание миграции (для production)
npm run db:migrate

# Заполнение начальными данными (создаёт администратора)
npm run db:seed
```

### 4. Настройка NextAuth

В `.env` добавьте:

```
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="сгенерируйте-случайную-строку"
```

Для генерации секрета можно использовать:

```bash
openssl rand -base64 32
```

### 5. Запуск dev-сервера

```bash
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000)

### 6. Вход в админ-панель

- URL: http://localhost:3000/login
- Email: `admin@mesedclinic.ru` (после выполнения seed)
- Пароль: `admin123` (изменить после первого входа!)

## Скрипты

- `npm run dev` — запуск dev-сервера
- `npm run build` — сборка для production
- `npm run start` — запуск production-сервера
- `npm run lint` — проверка кода
- `npm run db:generate` — генерация Prisma Client
- `npm run db:push` — применение схемы к БД (dev)
- `npm run db:migrate` — создание миграции (production)
- `npm run db:studio` — открытие Prisma Studio (GUI для БД)
- `npm run db:seed` — заполнение начальными данными

## Основные функции

### Публичная часть

- Главная страница
- Каталог направлений (hub-страницы)
- Каталог услуг с фильтрами
- "Что мы лечим" (проблемы/симптомы)
- Страницы филиалов
- Профили врачей
- Акции и спецпредложения
- Блог/статьи
- Онлайн-консультации
- Форма записи на приём

### Админ-панель

- Дашборд с общей статистикой
- CRUD для всех сущностей:
  - Услуги
  - Направления
  - "Что мы лечим"
  - Клиники/филиалы
  - Врачи
  - Акции
  - Статьи
- Управление заявками (лидами)

## Безопасность

⚠️ **Важно**: После первого запуска обязательно измените пароль администратора!

Для production:
- Используйте сильные пароли
- Настройте HTTPS
- Регулярно обновляйте зависимости
- Используйте переменные окружения для всех секретов

## Дальнейшее развитие

- [ ] Реализация CRUD форм в админ-панели
- [ ] Загрузка изображений (врачи, статьи)
- [ ] Интеграция с внешними CRM/МИС
- [ ] Email-уведомления о новых заявках
- [ ] Экспорт заявок в CSV/Excel
- [ ] Аналитика и отчёты

## Лицензия

Private
